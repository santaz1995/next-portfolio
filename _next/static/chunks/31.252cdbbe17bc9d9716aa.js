"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31],{1031:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(7294),i=n(2212),o=n(9365),r=n(1217);var s=n(4985),c=n(5893);var u=function(){var e=(0,a.useRef)(),t=(0,a.useState)(!0),n=t[0],u=t[1],d=(0,a.useState)(),h=d[0],l=d[1],f=(0,a.useState)(),v=(f[0],f[1]),w=(0,a.useState)(new i.Pa4(-.5,1.2,0))[0],S=(0,a.useState)(new i.Pa4(20*Math.sin(.2*Math.PI),10,20*Math.cos(.2*Math.PI)))[0],p=(0,a.useState)(new i.xsS)[0],M=(0,a.useState)(),m=(M[0],M[1]),g=(0,a.useCallback)((function(){var t=e.current;if(t&&h){var n=t.clientWidth,a=t.clientHeight;h.setSize(n,a)}}),[h]);return(0,a.useEffect)((function(){var t=e.current;if(t&&!h){var n=t.clientWidth,a=t.clientHeight,s=new i.CP7({antialias:!0,alpha:!0});s.setPixelRatio(window.devicePixelRatio),s.setSize(n,a),s.outputEncoding=i.knz,t.appendChild(s.domElement),l(s);var c=.005*a+4.8,d=new i.iKG(-c,c,c,-c,.01,5e4);d.position.copy(S),d.lookAt(w),v(d);var f=new i.Mig(13421772,1);p.add(f);var M=new o.z(d,s.domElement);M.autoRotate=!0,M.target=w,m(M),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{receiveShadow:!0,castShadow:!0},a=n.receiveShadow,i=n.castShadow;return new Promise((function(n,o){(new r.E).load(t,(function(t){var o=t.scene;o.name="dog",o.position.y=0,o.position.x=0,o.receiveShadow=a,o.castShadow=i,e.add(o),o.traverse((function(e){e.isMesh&&(e.castShadow=i,e.receiveShadow=a)})),n(o)}),void 0,(function(e){o(e)}))}))}(p,"/next-portfolio/dog.glb",{receiveShadow:!1,castShadow:!1}).then((function(){E(),u(!1)}));var g=null,x=0,E=function e(){if(g=requestAnimationFrame(e),(x=x<=100?x+1:x)<=100){var t=S,n=20*(a=x/120,-Math.sqrt(1-Math.pow(a-1,4))*Math.PI);d.position.y=10,d.position.x=t.x*Math.cos(n)+t.z*Math.sin(n),d.position.z=t.z*Math.cos(n)-t.x*Math.sin(n),d.lookAt(w)}else M.update();var a;s.render(p,d)};return function(){console.log("unmount"),cancelAnimationFrame(g),s.dispose()}}}),[]),(0,a.useEffect)((function(){return window.addEventListener("resize",g,!1),function(){window.removeEventListener("resize",g,!1)}}),[h,g]),(0,c.jsx)(s.Oi,{ref:e,children:n&&(0,c.jsx)(s.j_,{})})}}}]);